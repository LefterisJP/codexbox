#!/usr/bin/env bash
set -euo pipefail

REPO="${1:-.}"
TARGET_BRANCH="${2:-codexbox-work}"
REPO="$(realpath "$REPO")"

cd "$REPO"

git remote add codexbox .codexbox-out/host.git 2>/dev/null || true
git fetch codexbox
git switch -C "$TARGET_BRANCH" codexbox/codex

echo "[codexbox] Switched to $TARGET_BRANCH (latest Codex output)"
